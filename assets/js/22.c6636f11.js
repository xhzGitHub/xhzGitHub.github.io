(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{350:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#webpack-æ˜¯å¦‚ä½•è¿ä½œçš„"}},[t._v("webpack æ˜¯å¦‚ä½•è¿ä½œçš„")]),a("ul",[a("li",[a("a",{attrs:{href:"#æ¨¡å—è§£æ"}},[t._v("æ¨¡å—è§£æ")])]),a("li",[a("a",{attrs:{href:"#æ·±å±‚é€’å½’"}},[t._v("æ·±å±‚é€’å½’")])]),a("li",[a("a",{attrs:{href:"#ç”Ÿæˆä»£ç "}},[t._v("ç”Ÿæˆä»£ç ")])])])]),a("li",[a("a",{attrs:{href:"#æ‰‹å†™loader"}},[t._v("æ‰‹å†™loader")]),a("ul",[a("li",[a("a",{attrs:{href:"#åŸºæœ¬æ“ä½œ"}},[t._v("åŸºæœ¬æ“ä½œ")])]),a("li",[a("a",{attrs:{href:"#this-callback"}},[t._v("this.callback")])]),a("li",[a("a",{attrs:{href:"#å¼‚æ­¥ç¼–å†™"}},[t._v("å¼‚æ­¥ç¼–å†™")])]),a("li",[a("a",{attrs:{href:"#resolveloader"}},[t._v("resolveLoader")])])])]),a("li",[a("a",{attrs:{href:"#plugin"}},[t._v("Plugin")]),a("ul",[a("li",[a("a",{attrs:{href:"#åˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶"}},[t._v("åˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶")])])])]),a("li",[a("a",{attrs:{href:"#ast-ä¸-babel-åŸç†"}},[t._v("AST ä¸ Babel åŸç†")]),a("ul",[a("li",[a("a",{attrs:{href:"#babel-å·¥ä½œåŸç†"}},[t._v("Babel å·¥ä½œåŸç†")])])])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"webpack-æ˜¯å¦‚ä½•è¿ä½œçš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-æ˜¯å¦‚ä½•è¿ä½œçš„"}},[t._v("#")]),t._v(" webpack æ˜¯å¦‚ä½•è¿ä½œçš„")]),t._v(" "),a("p",[a("code",[t._v("webpack")]),t._v(" è¿ä½œçš„å¤§ä½“æ€è·¯æ˜¯ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å…ˆæ‰¾åˆ°å…¥å£æ–‡ä»¶ï¼Œå¹¶è§£æå…¥å£æ–‡ä»¶ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("æ‰¾åˆ°å…¥å£æ–‡ä»¶çš„ä¾èµ–(å…¶å®ƒ import æ–‡ä»¶)ï¼Œå¹¶å°†å…¥å£æ–‡ä»¶çš„ä»£ç è¿›è¡Œè½¬æ¢ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("ä½¿ç”¨é€’å½’çš„æ–¹å¼ä¸€å±‚ä¸€å±‚åœ°å°†ä¾èµ–ä¸ä¾èµ–ä¸­çš„ä»£ç è¿›è¡Œè§£æï¼Œç›´åˆ°æœ€åæ²¡æœ‰ä¾èµ–ä¸ºæ­¢ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("æœ€ç»ˆé€šè¿‡å°†æ‰€æœ‰ä»£ç è§£æä¸ºæµè§ˆå™¨èƒ½å¤Ÿè¿è¡Œçš„ä»£ç ã€‚")])])]),t._v(" "),a("h3",{attrs:{id:"æ¨¡å—è§£æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¨¡å—è§£æ"}},[t._v("#")]),t._v(" æ¨¡å—è§£æ")]),t._v(" "),a("p",[t._v("é¦–å…ˆï¼Œåšç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/parser'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" babel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" traverse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/traverse'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("moduleAnalyser")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("filename")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sourceCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// babel è§£ææºä»£ç ï¼ˆåªæœ‰ sourceType ä¸º module æ—¶æ‰èƒ½è§£æ import exportï¼‰")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sourceCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    sourceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dependencies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ AST çš„ node æ ‘ä¸Šåšè½¬æ¢")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("traverse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ImportDeclaration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" current_dirname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dependency_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current_dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dependency_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// babel core å°† ast æŠ½è±¡è¯­æ³•æ ‘è½¬æ¢ä¸ºæµè§ˆå™¨èƒ½å¤Ÿè¯»å¾—æ‡‚çš„ä»£ç  (es6 -> es5)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" babel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFromAst")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    presets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("è§£æçš„æ­¥éª¤å¤§æ¦‚æ˜¯ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å°†å…¥å£æ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ä¼ å…¥ "),a("code",[t._v("moduleAnalyser")]),t._v(" å‡½æ•°ä¸­ï¼Œé€šè¿‡ "),a("code",[t._v("node")]),t._v(" çš„ "),a("code",[t._v("fs")]),t._v(" æ¨¡å—å°†å…¥å£æ–‡ä»¶ä¸­çš„ä»£ç è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼›")]),t._v(" "),a("li",[t._v("ä½¿ç”¨ "),a("code",[t._v("@babel/parser")]),t._v(" å°†æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸º AST è¯­æ³•æ ‘ï¼›")]),t._v(" "),a("li",[t._v("ä½¿ç”¨ "),a("code",[t._v("@babel/traverse")]),t._v(" è¿›ä¸€æ­¥è§£æ AST è¯­æ³•æ ‘ï¼Œå°†å…¶ä¸­ä¾èµ–çš„è·¯å¾„è¿›è¡Œè§£ææ‹¼æ¥ï¼›")]),t._v(" "),a("li",[t._v("ä½¿ç”¨ "),a("code",[t._v("@babel/core")]),t._v(" ä¸ "),a("code",[t._v("@babel/preset-env")]),t._v(" ä¸¤å¤§ "),a("code",[t._v("babel")]),t._v(" æ ¸å¿ƒåŠŸèƒ½å°†æ•´ä¸ª AST è¯­æ³•æ ‘è½¬æ¢ä¸ºæµè§ˆå™¨èƒ½å¤Ÿè¯»æ‡‚çš„ä»£ç ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œæœ€åè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬äº†æ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶ä¸­çš„ä¾èµ–ä¸æ–‡ä»¶å¯è¯»ä»£ç ã€‚")])]),t._v(" "),a("p",[a("a",{attrs:{href:"#ast"}},[t._v("AST åŸç†è¯·æŸ¥çœ‹æœ¬æ–‡æœ€åå¤„ğŸ‘‡ğŸ‘‡ğŸ‘‡")])]),t._v(" "),a("h3",{attrs:{id:"æ·±å±‚é€’å½’"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ·±å±‚é€’å½’"}},[t._v("#")]),t._v(" æ·±å±‚é€’å½’")]),t._v(" "),a("p",[t._v("ç„¶åæˆ‘ä»¬åšç¬¬ä¸‰æ­¥ï¼Œå°†æ–‡ä»¶ä¸­çš„é€’å½’ä¸€å±‚ä¸€å±‚è¿›è¡Œè§£æï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†å…¥å£æ–‡ä»¶çš„æ‰€æœ‰ä¾èµ–å…¨éƒ¨è§£æï¼Œè§£æè¿‡ç¨‹åŒä¸Š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("deepModuleAnalyser")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" entryModule "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moduleAnalyser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" deepModuleArr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("entryModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€’å½’è§£æå…¶ä¸­çš„æ¯ä¸ªä¾èµ–")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" deepModuleArr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" _module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deepModuleArr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("index")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dependency "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        deepModuleArr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moduleAnalyser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dependency"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è½¬æ¢ä¸ºé”®å€¼å¯¹ï¼Œå¤„ç†æ›´åŠ å‹å¥½")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graph "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transform2Graph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("transform2Graph")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graph "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  deepModuleArr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("deepModule")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      code\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deepModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      code\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deepModuleAnalyser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å¤§è‡´çš„æ­¥éª¤ä¸ºï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å£°æ˜ä¸€ä¸ªæœ€ç»ˆéœ€è¦çš„ä¾èµ–æ•°ç»„ "),a("code",[t._v("deepModuleArr")]),t._v("ï¼Œé€šè¿‡è§£æå…¥å£æ–‡ä»¶ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿›è¡Œåˆå§‹åŒ–ï¼›")]),t._v(" "),a("li",[t._v("å¾ªç¯è¯»å– "),a("code",[t._v("deepModuleArr")]),t._v("ï¼Œå°†å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œè§£æï¼Œæ‰¾åˆ°æ¯ä¸ªå…ƒç´ çš„ "),a("code",[t._v("dependencies")]),t._v("ï¼Œæ¯è§£æä¸€ä¸ªå…ƒç´ ï¼Œå°†ç»“æœ push åˆ° "),a("code",[t._v("deepModuleArr")]),t._v("ï¼Œåç»­æ¯æ–° push çš„å…ƒç´ éƒ½æ˜¯åç»­çš„ä¾èµ–ï¼Œä»è€Œå®ç°é€’å½’ã€‚")])]),t._v(" "),a("p",[t._v("æœ€ç»ˆå¾—å‡ºçš„ç»“æœæ˜¯(åªæ˜¯çœ‹ä¸ªæ ·å­ï¼Œå…·ä½“æ•°æ®æ ¹æ®å®é™…æƒ…å†µè€Œå®š)ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/a.js'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"use strict\";\\n\\nvar _a = '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_interopRequireDefault(require(\"./a.js\"));\\n\\nfunction '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_interopRequireDefault(obj) { return obj && obj.__esModule ? obj '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\': { "default": obj }; }\\n\\nconsole.log(_a["default"]);\'')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/a.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./b.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/b.js'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"use strict";\\n\\nObject.defineProperty(exports, "__esModule", {\\n  \'')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value: true\\n});\\nexports[\"default\"] = void 0;\\n\\nvar _b = '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_interopRequireDefault(require(\"./b.js\"));\\n\\nfunction '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default": obj }; }\\n\\nvar a = \'a\' + _b["default"];\\nvar _default = a;\\n')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exports[\"default\"] = _default;'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/b.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"use strict\";\\n\\nObject.defineProperty(exports, '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"__esModule", {\\n  value: true\\n});\\nexports["default"] = \'')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("void 0;\\nvar b = 'b';\\nvar _default = b;\\nexports[\"default\"] ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'= _default;'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ç”Ÿæˆä»£ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿæˆä»£ç "}},[t._v("#")]),t._v(" ç”Ÿæˆä»£ç ")]),t._v(" "),a("p",[t._v("æœ€åéœ€è¦å°†ä»¥ä¸Šä¿¡æ¯è½¬æ¢ä¸ºæµè§ˆå™¨è¿è¡Œçš„ä»£ç ã€‚")]),t._v(" "),a("p",[t._v("å°†ä»¥ä¸Šå¯¹è±¡ä¸­çš„ä»£ç è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶ä½¿ç”¨ "),a("code",[t._v("eval")]),t._v(" å»æ‰§è¡Œè¯¥æ®µä»£ç ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¾èµ–ä¸­çš„è·¯å¾„é€šå¸¸æ˜¯ç±»ä¼¼ "),a("code",[t._v("./a.js")]),t._v(" ç­‰ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºç»å¯¹è·¯å¾„ã€‚å› æ­¤ä½¿ç”¨äº†ä»¥ä¸‹é—­åŒ…å‡½æ•°æ¥å°è£…äº†ä¸€å¥— "),a("code",[t._v("require")]),t._v(" æ¥è·å–ç»å¯¹è·¯å¾„ä¸‹çš„ä¾èµ–ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("generateCode")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graph "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeDependenciesGraph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n    (function(graph){\n      function require(module) {\n        function localRequire(relativePath) {\n          return require(graph[module].dependencies[relativePath]);\n        }\n        var exports = {};\n        (function(require, exports, code){\n          eval(code)\n        })(localRequire, exports, graph[module].code);\n        return exports;\n};\n      require('")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("')\n    })(")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("graph"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(");\n")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æœ€ç»ˆæµè§ˆå™¨åªè¦è·‘ä»¥ä¸Šä»£ç å°±å¯ä»¥è¿è¡Œå…¥å£æ–‡ä»¶ "),a("code",[t._v("index.js")]),t._v(" ä¸­çš„ä»£ç ã€‚")]),t._v(" "),a("h2",{attrs:{id:"æ‰‹å†™loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ‰‹å†™loader"}},[t._v("#")]),t._v(" æ‰‹å†™loader")]),t._v(" "),a("h3",{attrs:{id:"åŸºæœ¬æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬æ“ä½œ"}},[t._v("#")]),t._v(" åŸºæœ¬æ“ä½œ")]),t._v(" "),a("p",[a("code",[t._v("Loader")]),t._v(" å°±æ˜¯ä¸€ä¸ªå£°æ˜å¼å‡½æ•°ï¼Œï¥§èƒ½ç”¨ç®­å¤´å‡½æ•°ã€‚")]),t._v(" "),a("p",[t._v("å°†æºä»£ç ä½œä¸ºå‚æ•°ï¼Œåšè¿›ä¸€æ­¥çš„ä¿®é¥°å¤„ç†ï¼Œå†å°†å¤„ç†åçš„æºç è¿”å›å³å¯ã€‚")]),t._v(" "),a("p",[t._v("ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çš„éœ€æ±‚æ˜¯å°†æ‰€æœ‰ "),a("code",[t._v("js")]),t._v(" æ–‡ä»¶ä¸­çš„ "),a("code",[t._v("world")]),t._v(" è½¬æ¢ä¸ºå¯¹åº” "),a("code",[t._v("webpack.config.js")]),t._v(" ä¸­çš„å­—ç¬¦ä¸²ã€‚")]),t._v(" "),a("p",[t._v("æ–°å»º loaders æ–‡ä»¶å¤¹ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("project/\n--| loaders/\n-----| replace.js\n")])])]),a("p",[t._v("å†™ä¸€ä¸‹è¯¥ "),a("code",[t._v("loader")]),t._v(" çš„å¤„ç†æ–¹æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" word "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" word"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æœ€åé…ç½®ä¸€ä¸‹ "),a("code",[t._v("webpack.config.js")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.js$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../loaders/replaceLoader.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                word"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xhz'")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œ "),a("code",[t._v("options")]),t._v(" å…¶å®å°±æ˜¯ "),a("code",[t._v("loader")]),t._v(" çš„å‚æ•°ï¼Œæœ€ååœ¨ "),a("code",[t._v("loader")]),t._v(" æ–‡ä»¶ä¸­ä»¥ "),a("code",[t._v("this.query")]),t._v(" ä¸­å–åˆ°è¯¥å‚æ•°ã€‚")]),t._v(" "),a("p",[a("code",[t._v("loader")]),t._v(" å¿…é¡»è¿”å›ç»è¿‡å¤„ç†åçš„æºä»£ç ï¼Œå¯ä»¥æ˜¯ string æˆ– bufferã€‚")]),t._v(" "),a("p",[a("strong",[t._v("å¯ä»¥çœ‹åˆ°æ‰“åŒ…åçš„æ–‡ä»¶ä¸­æ‰€æœ‰çš„ world éƒ½è¢«æ›¿æ¢ä¸º xhz")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://webpack.js.org/contribute/writing-a-loader/",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡æ¡£"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://webpack.js.org/api/loaders/",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ¥å£æ–‡æ¡£"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"this-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this-callback"}},[t._v("#")]),t._v(" this.callback")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ "),a("code",[t._v("this.callback")]),t._v(" è¿”å›ä»£ç ã€‚")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  sourceMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SourceMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("æ‰€ä»¥å¯ä»¥æ”¹å†™ä¸€ä¸‹ä¹‹å‰çš„ "),a("code",[t._v("loader")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" word "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" word"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"å¼‚æ­¥ç¼–å†™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥ç¼–å†™"}},[t._v("#")]),t._v(" å¼‚æ­¥ç¼–å†™")]),t._v(" "),a("p",[t._v("å‡è®¾åœ¨ loader ä¸­æœ‰ä¸€äº›éœ€è¦å¼‚æ­¥å¤„ç†çš„ä»£ç ï¼Œæ¯”å¦‚åœ¨æˆ‘ä»¬çš„ loader ä¸­éœ€è¦3ç§’åå°†å¤„ç†åçš„ä»£ç è¿›è¡Œè¿”å›ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåšï¼Ÿ")]),t._v(" "),a("p",[t._v("è¿™é‡Œä½¿ç”¨äº† "),a("code",[t._v("this.async()")]),t._v(" è¿›è¡Œå¤„ç†ã€‚")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cb "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("async")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" word "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" word"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ this.async å°†ä»£ç è¿”å›")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"resolveloader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resolveloader"}},[t._v("#")]),t._v(" resolveLoader")]),t._v(" "),a("p",[a("code",[t._v("resolveLoader")]),t._v(" ç”¨äºç›´æ¥è§£æ "),a("code",[t._v("loader")]),t._v(" çš„è·¯å¾„ã€‚")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    resolveLoader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./loaders'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("resolveLoader")]),t._v(" ä¼šå…ˆå» "),a("code",[t._v("node_modules")]),t._v(" ä¸­å¯»æ‰¾å¯¹åº”åç§°çš„ "),a("code",[t._v("loader")]),t._v("ï¼Œè‹¥æ²¡æœ‰åˆ™å›å» "),a("code",[t._v("./loaders")]),t._v(" ä¸­å¯»æ‰¾ã€‚")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆæˆ‘ä»¬çš„ "),a("code",[t._v("loader")]),t._v(" å°±å¯ä»¥ä¸ç”¨è§£æè·¯å¾„äº†ï¼š")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.js$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"replaceLoader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                word"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xhz'")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin"}},[t._v("#")]),t._v(" Plugin")]),t._v(" "),a("p",[t._v("ä¸€ä¸ªæ’ä»¶ "),a("code",[t._v("Plugin")]),t._v(" å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç±»ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨ "),a("code",[t._v("webpack")]),t._v(" çš„åº•å±‚ç‰¹æ€§æ¥åšç›¸åº”çš„é’©å­(hooks)ã€‚")]),t._v(" "),a("h3",{attrs:{id:"åˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶"}},[t._v("#")]),t._v(" åˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çš„éœ€æ±‚æ˜¯åˆ›å»ºä¸€ä¸ªåœ¨ "),a("code",[t._v("webpack")]),t._v(" æ‰“åŒ…åèƒ½å¤Ÿåœ¨æˆ‘ä»¬ "),a("code",[t._v("dist")]),t._v(" æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª copyright.txt æ–‡ä»¶çš„æ’ä»¶ã€‚")]),t._v(" "),a("p",[t._v("ä¸€ä¸ªæ’ä»¶éœ€è¦çš„å¿…è¦å› ç´ ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("apply æ–¹æ³•")]),t._v(" "),a("li",[t._v("é’©å­å‡½æ•°")]),t._v(" "),a("li",[t._v("åŠŸèƒ½å®Œæˆåè°ƒç”¨ webpack æä¾›çš„å›è°ƒ")])]),t._v(" "),a("p",[t._v("é¦–å…ˆç¼–å†™ä¸€ä¸‹æˆ‘ä»¬çš„æ’ä»¶:")]),t._v(" "),a("p",[t._v("// copyright-webpack-plugin.js")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CopyrightWebpackPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'options: '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// compiler æ˜¯ webpack å®ä¾‹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// emitï¼Œåœ¨åˆ›å»ºæ–‡ä»¶ä¹‹å‰æ‰§è¡Œçš„é’©å­")]),t._v("\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("emit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tapAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CopyrightWebpackPlugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("assets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"copyright.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello copyright'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    \nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CopyrightWebpackPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("æˆ‘ä»¬åœ¨ "),a("code",[t._v("webpack")]),t._v(" æ‰§è¡Œæ‰“åŒ…åï¼Œæ‰§è¡Œäº† "),a("code",[t._v("emit")]),t._v(" é’©å­ï¼Œé’©å­ç”¨äºæ§åˆ¶æˆ‘ä»¬çš„åŠŸèƒ½å‡½æ•°åœ¨ "),a("code",[t._v("webpack")]),t._v(" ç¼–è¯‘çš„ä»€ä¹ˆæ—¶æœŸæ‰§è¡Œï¼Œ"),a("code",[t._v("emit")]),t._v(" çš„ä½œç”¨å°±æ˜¯ç”Ÿæˆèµ„æºåˆ° output ç›®å½•ä¹‹å‰ã€‚")]),t._v(" "),a("p",[t._v("å¹¶ä¸”æˆ‘ä»¬è°ƒç”¨äº† "),a("code",[t._v("compilation")]),t._v(" â€”â€” èµ„æºå®ä¾‹ï¼Œç›´æ¥æ–°å¢ä¸€ä¸ª "),a("code",[t._v("copyright.txt")]),t._v(" çš„æ–‡ä»¶ã€‚å…¶ä¸­ "),a("code",[t._v("tapAsync")]),t._v(" æ˜¯å¼‚æ­¥å¤„ç†ã€‚")]),t._v(" "),a("p",[a("a",{attrs:{id:"ast"}})]),t._v(" "),a("h2",{attrs:{id:"ast-ä¸-babel-åŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ast-ä¸-babel-åŸç†"}},[t._v("#")]),t._v(" AST ä¸ Babel åŸç†")]),t._v(" "),a("p",[t._v("ï¼ˆä»¥ä¸‹å†…å®¹æ‘˜æŠ„è‡ªæŸæ–‡ç« ï¼‰ã€‚")]),t._v(" "),a("h3",{attrs:{id:"babel-å·¥ä½œåŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-å·¥ä½œåŸç†"}},[t._v("#")]),t._v(" Babel å·¥ä½œåŸç†")]),t._v(" "),a("p",[t._v("Babel çš„ç¼–è¯‘è¿‡ç¨‹å’Œå¤§å¤šæ•°å…¶ä»–è¯­è¨€çš„ç¼–è¯‘å™¨ç›¸ä¼¼ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è§£æï¼ˆParsingï¼‰ï¼šå°†ä»£ç å­—ç¬¦ä¸²è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ã€‚")]),t._v(" "),a("li",[t._v("è½¬æ¢ï¼ˆTransformationï¼‰ï¼šå¯¹æŠ½è±¡è¯­æ³•æ ‘è¿›è¡Œè½¬æ¢æ“ä½œã€‚")]),t._v(" "),a("li",[t._v("ç”Ÿæˆï¼ˆCode Generationï¼‰: æ ¹æ®å˜æ¢åçš„æŠ½è±¡è¯­æ³•æ ‘å†ç”Ÿæˆä»£ç å­—ç¬¦ä¸²ã€‚")])]),t._v(" "),a("p",[t._v("ä¸ºäº†ç†è§£ Babelï¼Œæˆ‘ä»¬ä»æœ€ç®€å•ä¸€å¥ console å‘½ä»¤ä¸‹æ‰‹ã€‚")]),t._v(" "),a("h4",{attrs:{id:"è§£æï¼ˆparsingï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£æï¼ˆparsingï¼‰"}},[t._v("#")]),t._v(" è§£æï¼ˆParsingï¼‰")]),t._v(" "),a("p",[t._v("æ‹¿åˆ°æºä»£ç ä¼šæŠŠä»£ç æŠ½è±¡å‡ºæ¥ï¼Œå˜æˆ "),a("strong",[t._v("AST ï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰")]),t._v("ï¼Œå­¦è¿‡ç¼–è¯‘åŸç†çš„åŒå­¦åº”è¯¥éƒ½å¬è¿‡è¿™ä¸ªè¯ï¼Œå…¨ç§°æ˜¯ "),a("strong",[t._v("Abstract Syntax Tree")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("æŠ½è±¡è¯­æ³•æ ‘æ˜¯æºä»£ç çš„æŠ½è±¡è¯­æ³•ç»“æ„çš„æ ‘çŠ¶è¡¨ç¤ºï¼Œæ ‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¡¨ç¤ºæºä»£ç ä¸­çš„ä¸€ç§ç»“æ„ï¼Œåªæ‰€ä»¥è¯´æ˜¯æŠ½è±¡çš„ï¼Œæ˜¯å› ä¸ºæŠ½è±¡è¯­æ³•æ ‘å¹¶ä¸ä¼šè¡¨ç¤ºå‡ºçœŸå®è¯­æ³•å‡ºç°çš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œæ¯”å¦‚è¯´ï¼ŒåµŒå¥—æ‹¬å·è¢«éšå«åœ¨æ ‘çš„ç»“æ„ä¸­ï¼Œå¹¶æ²¡æœ‰ä»¥èŠ‚ç‚¹çš„å½¢å¼å‘ˆç°ï¼Œå®ƒä»¬ä¸»è¦ç”¨äºæºä»£ç çš„ç®€å•è½¬æ¢ã€‚")]),t._v(" "),a("p",[t._v("console.log('zcy')ï¼› çš„ AST é•¿è¿™æ ·ï¼š")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Program"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"body"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ExpressionStatement"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expression"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CallExpression"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"callee"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MemberExpression"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"computed"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"object"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Identifier"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"console"')]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"property"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Identifier"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"log"')]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"arguments"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Literal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zcy"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"raw"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"'zcy'\"")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sourceType"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä¸Šé¢çš„ AST æè¿°äº†æºä»£ç çš„æ¯ä¸ªéƒ¨åˆ†ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("AST æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ")])]),t._v(" "),a("p",[t._v("æ•´ä¸ªè§£æè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åˆ†è¯ï¼šå°†æ•´ä¸ªä»£ç å­—ç¬¦ä¸²åˆ†å‰²æˆè¯­æ³•å•å…ƒæ•°ç»„")]),t._v(" "),a("li",[t._v("è¯­æ³•åˆ†æï¼šå»ºç«‹åˆ†æè¯­æ³•å•å…ƒä¹‹é—´çš„å…³ç³»")])]),t._v(" "),a("h4",{attrs:{id:"åˆ†è¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†è¯"}},[t._v("#")]),t._v(" åˆ†è¯")]),t._v(" "),a("p",[t._v("è¯­æ³•å•å…ƒé€šä¿—ç‚¹è¯´å°±æ˜¯ä»£ç ä¸­çš„æœ€å°å•å…ƒï¼Œä¸èƒ½å†è¢«åˆ†å‰²ï¼Œå°±åƒåŸå­æ˜¯åŒ–å­¦å˜åŒ–ä¸­çš„æœ€å°ç²’å­ä¸€æ ·ã€‚")]),t._v(" "),a("p",[t._v("Javascript ä»£ç ä¸­çš„è¯­æ³•å•å…ƒä¸»è¦åŒ…æ‹¬ä»¥ä¸‹è¿™ä¹ˆå‡ ç§ï¼š")]),t._v(" "),a("p",[t._v("å…³é”®å­—ï¼šconstã€ letã€  var ç­‰")]),t._v(" "),a("ul",[a("li",[t._v("æ ‡è¯†ç¬¦ï¼šå¯èƒ½æ˜¯ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå¯èƒ½æ˜¯ ifã€else è¿™äº›å…³é”®å­—ï¼Œåˆæˆ–è€…æ˜¯ trueã€false è¿™äº›å¸¸é‡")]),t._v(" "),a("li",[t._v("è¿ç®—ç¬¦")]),t._v(" "),a("li",[t._v("æ•°å­—")]),t._v(" "),a("li",[t._v("ç©ºæ ¼")]),t._v(" "),a("li",[t._v("æ³¨é‡Šï¼šå¯¹äºè®¡ç®—æœºæ¥è¯´ï¼ŒçŸ¥é“æ˜¯è¿™æ®µä»£ç æ˜¯æ³¨é‡Šå°±è¡Œäº†ï¼Œä¸å…³å¿ƒå…¶å…·ä½“å†…å®¹\nå…¶å®åˆ†è¯è¯´ç™½äº†å°±æ˜¯ç®€å•ç²—æš´åœ°å¯¹å­—ç¬¦ä¸²ä¸€ä¸ªä¸ªéå†ã€‚ä¸ºäº†æ¨¡æ‹Ÿåˆ†è¯çš„è¿‡ç¨‹ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„ Demoï¼Œä»…ä»…é€‚ç”¨äºå’Œä¸Šé¢ä¸€æ ·çš„ç®€å•ä»£ç ã€‚Babel çš„å®ç°æ¯”è¿™è¦å¤æ‚å¾—å¤šï¼Œä½†æ˜¯æ€è·¯å¤§ä½“ä¸Šæ˜¯ç›¸åŒçš„ã€‚å¯¹äºä¸€äº›å¥½å¥‡å¿ƒæ¯”è¾ƒå¼ºçš„åŒå­¦ï¼Œå¯ä»¥çœ‹ä¸‹å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œé“¾æ¥åœ¨æ–‡ç« åº•éƒ¨ã€‚")])]),t._v(" "),a("p",[t._v("ç»“æœå¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Identifier"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"console"')]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Punctuator"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Identifier"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"log"')]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Punctuator"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"("')]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"String"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"'zcy'\"")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Punctuator"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('")"')]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Punctuator"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('";"')]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h4",{attrs:{id:"è¯­æ³•åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•åˆ†æ"}},[t._v("#")]),t._v(" è¯­æ³•åˆ†æ")]),t._v(" "),a("p",[t._v("è¯­ä¹‰åˆ†æåˆ™æ˜¯å°†å¾—åˆ°çš„è¯æ±‡è¿›è¡Œä¸€ä¸ªç«‹ä½“çš„ç»„åˆï¼Œç¡®å®šè¯è¯­ä¹‹é—´çš„å…³ç³»ã€‚è€ƒè™‘åˆ°ç¼–ç¨‹è¯­è¨€çš„å„ç§ä»å±å…³ç³»çš„å¤æ‚æ€§ï¼Œè¯­ä¹‰åˆ†æçš„è¿‡ç¨‹åˆæ˜¯åœ¨éå†å¾—åˆ°çš„è¯­æ³•å•å…ƒç»„ï¼Œç›¸å¯¹è€Œè¨€å°±ä¼šå˜å¾—æ›´å¤æ‚ã€‚")]),t._v(" "),a("p",[t._v("ç®€å•æ¥è¯´è¯­æ³•åˆ†ææ˜¯å¯¹è¯­å¥å’Œè¡¨è¾¾å¼è¯†åˆ«ï¼Œè¿™æ˜¯ä¸ªé€’å½’è¿‡ç¨‹ï¼Œåœ¨è§£æä¸­ï¼ŒBabel ä¼šåœ¨è§£ææ¯ä¸ªè¯­å¥å’Œè¡¨è¾¾å¼çš„è¿‡ç¨‹ä¸­è®¾ç½®ä¸€ä¸ªæš‚å­˜å™¨ï¼Œç”¨æ¥æš‚å­˜å½“å‰è¯»å–åˆ°çš„è¯­æ³•å•å…ƒï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œå°±ä¼šè¿”å›ä¹‹å‰çš„æš‚å­˜ç‚¹ï¼Œå†æŒ‰ç…§å¦ä¸€ç§æ–¹å¼è¿›è¡Œè§£æï¼Œå¦‚æœè§£ææˆåŠŸï¼Œåˆ™å°†æš‚å­˜ç‚¹é”€æ¯ï¼Œä¸æ–­é‡å¤ä»¥ä¸Šæ“ä½œï¼Œç›´åˆ°æœ€åç”Ÿæˆå¯¹åº”çš„è¯­æ³•æ ‘ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è½¬æ¢ï¼ˆTransformationï¼‰")])]),t._v(" "),a("p",[t._v("Plugins")]),t._v(" "),a("p",[t._v("æ’ä»¶åº”ç”¨äº babel çš„è½¬è¯‘è¿‡ç¨‹ï¼Œå°¤å…¶æ˜¯ç¬¬äºŒä¸ªé˜¶æ®µ Transformationï¼Œå¦‚æœè¿™ä¸ªé˜¶æ®µä¸ä½¿ç”¨ä»»ä½•æ’ä»¶ï¼Œé‚£ä¹ˆ babel ä¼šåŸæ ·è¾“å‡ºä»£ç ã€‚")]),t._v(" "),a("p",[t._v("Presets")]),t._v(" "),a("p",[t._v("Babel å®˜æ–¹å¸®æˆ‘ä»¬åšäº†ä¸€äº›é¢„è®¾çš„æ’ä»¶é›†ï¼Œç§°ä¹‹ä¸º Presetï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å¯¹åº”çš„ Preset å°±å¯ä»¥äº†ã€‚æ¯å¹´æ¯ä¸ª Preset åªç¼–è¯‘å½“å¹´æ‰¹å‡†çš„å†…å®¹ã€‚è€Œ babel-preset-env ç›¸å½“äº ES2015 ï¼ŒES2016 ï¼ŒES2017 åŠæœ€æ–°ç‰ˆæœ¬ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);